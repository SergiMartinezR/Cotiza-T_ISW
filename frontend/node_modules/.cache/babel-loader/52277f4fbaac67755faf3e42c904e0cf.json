{"ast":null,"code":"var _jsxFileName = \"/home/sergi/Documents/Repos/My_Repos/Cotiza-T_ISW/frontend/src/components/CreatePost/CreatePost.js\";\nimport React, { Component } from \"react\";\nimport CreatePostModal from \"./Modal/CreatePostModal\";\nimport \"./CreatePost.css\";\nimport CustomAlert from \"../CustomAlert/CustomAlert\";\nimport axios from \"../../API/baseURL/baseURL\";\n\nclass CreatePost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showModal: false,\n      showAlert: false,\n      alertColor: \"danger\",\n      alertData: \"Error\"\n    };\n\n    this.showModal = () => {\n      this.setState({\n        showModal: true\n      });\n    };\n\n    this.hideModal = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n\n    this.hidePop = () => {\n      this.setState({\n        showAlert: false\n      });\n    };\n\n    this.createPost = details => {\n      console.log(details);\n      let token = localStorage.getItem(\"accessToken\");\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      let mediaData = null;\n\n      if (details.selectedType === \"img\") {\n        mediaData = details.imgSelected;\n      }\n\n      if (details.selectedType === \"video\") {\n        mediaData = details.videoSelected;\n      } // let postData = {\n      //   media_type: details.selectedType,\n      //   text: details.postText,\n      //   media: mediaData,\n      // };\n\n\n      let profID = localStorage.getItem(\"profileID\");\n      let postData = new FormData();\n      postData.append(\"media_type\", details.selectedType);\n      postData.append(\"text\", details.postText);\n\n      if (mediaData !== null) {\n        postData.append(\"media\", mediaData);\n      }\n\n      postData.append(\"written_by\", profID);\n      console.log(postData);\n      axios.post(\"/user/post/create/\", postData, config).then(res => {\n        console.log(res);\n\n        if (res.status === 201) {\n          this.setState({\n            showAlert: true,\n            alertData: \"El post fue creado exitosamente!\",\n            alertColor: \"success\"\n          });\n          setTimeout(() => {\n            this.setState({\n              showAlert: false\n            });\n          }, 2800);\n        }\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          showAlert: true,\n          alertData: \"Algo salio mal!\",\n          alertColor: \"danger\"\n        });\n      });\n    };\n  }\n\n  render() {\n    let modalData = null;\n\n    if (this.state.showModal) {\n      modalData = /*#__PURE__*/React.createElement(CreatePostModal, {\n        createPost: this.createPost,\n        hideModal: this.hideModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }\n      });\n    }\n\n    let alertData = null;\n\n    if (this.state.showAlert) {\n      alertData = /*#__PURE__*/React.createElement(CustomAlert, {\n        hidePop: this.hidePop,\n        color: this.state.alertColor,\n        content: this.state.alertData,\n        where: \"createPost\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, alertData, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"createPost\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, modalData, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"createPostHead\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: this.showModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        marginRight: \"4.5px\",\n        transform: \"translateY(-1.2px)\"\n      },\n      class: \"fas fa-edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }), \"Crear post\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"createPostBottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.showModal,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        color: \"#70b5f9\"\n      },\n      class: \"fas fa-camera-retro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }), \"Foto\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.showModal,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        color: \"#e7a33e\"\n      },\n      class: \"fas fa-video\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }), \"Video\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.showModal,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        color: \"#7FC15E\"\n      },\n      class: \"fas fa-camera-retro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }), \"Articulo\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.showModal,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-plus-square\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }), \"Post\"))));\n  }\n\n}\n\nexport default CreatePost;","map":{"version":3,"sources":["/home/sergi/Documents/Repos/My_Repos/Cotiza-T_ISW/frontend/src/components/CreatePost/CreatePost.js"],"names":["React","Component","CreatePostModal","CustomAlert","axios","CreatePost","state","showModal","showAlert","alertColor","alertData","setState","hideModal","hidePop","createPost","details","console","log","token","localStorage","getItem","config","headers","Authorization","mediaData","selectedType","imgSelected","videoSelected","profID","postData","FormData","append","postText","post","then","res","status","setTimeout","catch","err","render","modalData","marginRight","transform","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport CreatePostModal from \"./Modal/CreatePostModal\";\r\nimport \"./CreatePost.css\";\r\nimport CustomAlert from \"../CustomAlert/CustomAlert\";\r\nimport axios from \"../../API/baseURL/baseURL\";\r\n\r\nclass CreatePost extends Component {\r\n  state = {\r\n    showModal: false,\r\n    showAlert: false,\r\n    alertColor: \"danger\",\r\n    alertData: \"Error\",\r\n  };\r\n\r\n  showModal = () => {\r\n    this.setState({ showModal: true });\r\n  };\r\n\r\n  hideModal = () => {\r\n    this.setState({ showModal: false });\r\n  };\r\n\r\n  hidePop = () => {\r\n    this.setState({ showAlert: false });\r\n  };\r\n\r\n  createPost = (details) => {\r\n    console.log(details);\r\n\r\n    let token = localStorage.getItem(\"accessToken\");\r\n    const config = {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    };\r\n\r\n    let mediaData = null;\r\n    if (details.selectedType === \"img\") {\r\n      mediaData = details.imgSelected;\r\n    }\r\n    if (details.selectedType === \"video\") {\r\n      mediaData = details.videoSelected;\r\n    }\r\n\r\n    // let postData = {\r\n    //   media_type: details.selectedType,\r\n    //   text: details.postText,\r\n    //   media: mediaData,\r\n    // };\r\n    let profID = localStorage.getItem(\"profileID\");\r\n    let postData = new FormData();\r\n    postData.append(\"media_type\", details.selectedType);\r\n    postData.append(\"text\", details.postText);\r\n    if (mediaData !== null) {\r\n      postData.append(\"media\", mediaData);\r\n    }\r\n    postData.append(\"written_by\", profID);\r\n\r\n    console.log(postData);\r\n\r\n    axios\r\n      .post(\"/user/post/create/\", postData, config)\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.status === 201) {\r\n          this.setState({\r\n            showAlert: true,\r\n            alertData: \"El post fue creado exitosamente!\",\r\n            alertColor: \"success\",\r\n          });\r\n          setTimeout(()=>{\r\n            this.setState({showAlert: false}); \r\n          },2800)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        this.setState({\r\n          showAlert: true,\r\n          alertData: \"Algo salio mal!\",\r\n          alertColor: \"danger\",\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    let modalData = null;\r\n    if (this.state.showModal) {\r\n      modalData = (\r\n        <CreatePostModal\r\n          createPost={this.createPost}\r\n          hideModal={this.hideModal}\r\n        />\r\n      );\r\n    }\r\n\r\n    let alertData = null;\r\n    if (this.state.showAlert) {\r\n      alertData = (\r\n        <CustomAlert\r\n          hidePop={this.hidePop}\r\n          color={this.state.alertColor}\r\n          content={this.state.alertData}\r\n          where=\"createPost\"\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {alertData}\r\n        <div className=\"createPost\">\r\n          {modalData}\r\n          <div className=\"createPostHead\">\r\n            <h6 onClick={this.showModal}>\r\n              <i\r\n                style={{\r\n                  marginRight: \"4.5px\",\r\n                  transform: \"translateY(-1.2px)\",\r\n                }}\r\n                class=\"fas fa-edit\"\r\n              ></i>\r\n              Crear post\r\n            </h6>\r\n          </div>\r\n          <div className=\"createPostBottom\">\r\n            <div onClick={this.showModal} className=\"button\">\r\n              <i style={{ color: \"#70b5f9\" }} class=\"fas fa-camera-retro\"></i>\r\n              Foto\r\n            </div>\r\n            <div onClick={this.showModal} className=\"button\">\r\n              <i style={{ color: \"#e7a33e\" }} class=\"fas fa-video\"></i>\r\n              Video\r\n            </div>\r\n            <div onClick={this.showModal} className=\"button\">\r\n              <i style={{ color: \"#7FC15E\" }} class=\"fas fa-camera-retro\"></i>\r\n              Articulo\r\n            </div>\r\n            <div onClick={this.showModal} className=\"button\">\r\n              <i class=\"fas fa-plus-square\"></i>\r\n              Post\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CreatePost;\r\n"]},"metadata":{},"sourceType":"module"}