{"ast":null,"code":"var _jsxFileName = \"/home/sergi/Documents/Repos/My_Repos/Cotiza-T_ISW/frontend/src/routes/SavedPosts/Post/Post.js\";\nimport React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport defaultPic from \"../../../assets/defaultProfilePic.png\";\nimport mediaSrcI from \"../../../assets/4.png\";\nimport mediaSrcV from \"../../../assets/sampleVideo.mp4\";\nimport Comment from \"./Comment\";\nimport PeopleLiked from \"./PeopleLiked\";\nimport axios from \"../../../API/baseURL/baseURL\";\n\nclass Post extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      post: this.props.data,\n      comments: this.props.data.comments,\n      showFullText: false,\n      isLiked: this.props.data.is_liked_by_user,\n      displayCommentSection: false,\n      newComment: \"\",\n      showModal: false,\n      modalData: null,\n      likedByList: this.props.data.liked_by,\n      isBookmarked: this.props.data.is_saved_by_user\n    };\n\n    this.showPeopleList = data => {\n      console.log(data);\n      let peopleList = data;\n      let profID = localStorage.getItem(\"profileID\");\n\n      if (this.state.isLiked) {\n        let newList = [{\n          id: profID,\n          voter_avatar: this.props.data.viewer_avatar,\n          voter_name: this.props.data.viewer_name,\n          voter_tagline: this.props.data.viewer_tagline\n        }];\n\n        for (let index in peopleList) {\n          newList.push(peopleList[index]);\n        }\n\n        peopleList = newList;\n      }\n\n      console.log(this.state.isLiked);\n      console.log(peopleList);\n      this.setState({\n        showModal: true,\n        modalData: peopleList\n      });\n    };\n\n    this.hideModal = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n\n    this.showFullText = () => {\n      this.setState({\n        showFullText: true\n      });\n    };\n\n    this.like = () => {\n      let token = localStorage.getItem(\"accessToken\");\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      let likePost = {\n        vote: 1\n      };\n      axios.post(`/user/post/vote/${this.props.postId}/like/`, likePost, config).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.setState({\n        isLiked: true\n      });\n      this.state.post.likes_count = this.state.post.likes_count + 1;\n    };\n\n    this.unLike = () => {\n      let token = localStorage.getItem(\"accessToken\");\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}` // \"Content-Type\": \"application/json\",\n          // \"Accept\": \"application/json\",\n\n        }\n      };\n      let likePost = {\n        vote: -1\n      };\n      axios.post(`/user/post/vote/${this.props.postId}/like/`, likePost, config).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.setState({\n        isLiked: false\n      });\n      this.state.post.likes_count = this.state.post.likes_count - 1;\n    };\n\n    this.displayCommentSection = () => {\n      this.setState({\n        displayCommentSection: true\n      });\n    };\n\n    this.bookmark = () => {\n      this.setState({\n        isBookmarked: true\n      });\n      let token = localStorage.getItem(\"accessToken\");\n      const config = {\n        // withCredentials: true,\n        headers: {\n          Authorization: `Bearer ${token}` // \"Content-Type\": \"application/json\",\n          // \"Accept\": \"application/json\",\n\n        }\n      };\n      const bookData = {\n        field: \"data\"\n      };\n      axios.post(`/user/post/bookmark/${this.props.postId}/`, bookData, config).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.unBookmark = () => {\n      this.setState({\n        isBookmarked: false\n      });\n      let token = localStorage.getItem(\"accessToken\");\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      const bookData = {\n        field: \"data\"\n      };\n      axios.delete(`/user/post/bookmark/${this.props.postId}/`, bookData, config).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.addComment = e => {\n      e.preventDefault();\n      let profID = localStorage.getItem(\"profileID\");\n      let postId = this.props.postId;\n      let text = this.state.newComment;\n      let commentData = {\n        commented_by: profID,\n        post: postId,\n        text: text\n      };\n      let token = localStorage.getItem(\"accessToken\");\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      let commentId = null;\n      console.log(commentData);\n      axios.post(`/user/post/comment/create/`, commentData, config).then(res => {\n        console.log(res);\n        commentId = res.data.id;\n      }).catch(err => {\n        console.log(err);\n      });\n      this.state.post.comment_count = this.state.post.comment_count + 1;\n      let newComments = [// {\n      //   userPic : this.props.data.selfUserPic,\n      //   userName : this.props.data.selfName,\n      //   tagline : this.props.data.tagLine,\n      // }\n      {\n        comment: {\n          author_id: profID,\n          // commentId: null,\n          author_avatar: this.props.data.viewer_avatar,\n          is_liked: false,\n          likes_count: 0,\n          id: commentId,\n          posted_at: 'just now',\n          comment_count: 0,\n          author_name: this.props.data.viewer_name,\n          author_tagline: this.props.data.viewer_tagline,\n          text: this.state.newComment\n        },\n        replies: []\n      }];\n\n      for (let index in this.state.comments) {\n        newComments.push(this.state.comments[index]);\n      } // alert(this.state.newComment);\n\n\n      this.setState({\n        newComment: \"\",\n        comments: newComments\n      });\n      this.setState({\n        newComment: \"\",\n        comments: newComments\n      });\n      setTimeout(() => {\n        console.log(this.state.comments);\n      }, 1000);\n    };\n  }\n\n  render() {\n    let postData = this.state.post; // let userPic = postData.userPic;\n\n    let userPic = postData.author_avatar;\n\n    if (userPic === null || userPic === undefined) {\n      userPic = defaultPic;\n    } // let postTextData = postData.postText;\n\n\n    let postTextData = postData.text;\n    let textHeight = null;\n    let seeMore = {\n      display: \"none\"\n    };\n\n    if (!this.state.showFullText) {\n      textHeight = {\n        height: \"65px\",\n        overflowY: \"hidden\"\n      };\n      seeMore = {\n        display: \"block\"\n      };\n    }\n\n    let mediaData = null;\n\n    if (postData.media_type === \"img\") {\n      mediaData = /*#__PURE__*/React.createElement(\"img\", {\n        src: postData.media,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 9\n        }\n      }) // <img src={mediaSrcI} />\n      ;\n    }\n\n    if (postData.media_type === \"video\") {\n      mediaData = /*#__PURE__*/React.createElement(\"video\", {\n        src: postData.media,\n        controls: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 9\n        }\n      }) // <video src={mediaSrcV} controls />\n      ;\n    }\n\n    let iconData = /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.unLike,\n      className: \"likeIcon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        color: \"#0a66c2\"\n      },\n      class: \"fas fa-thumbs-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      style: {\n        color: \"#0a66c2\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }\n    }, \"Like\"));\n\n    if (!this.state.isLiked) {\n      iconData = /*#__PURE__*/React.createElement(\"div\", {\n        onClick: this.like,\n        className: \"likeIcon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"far fa-thumbs-up\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }\n      }, \"Like\"));\n    }\n\n    let commentImgSrc = postData.viewer_avatar;\n\n    if (commentImgSrc === null) {\n      commentImgSrc = defaultPic;\n    }\n\n    let commentSection = null;\n\n    if (this.state.displayCommentSection) {\n      commentSection = /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.addComment,\n        className: \"commentInputBar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: commentImgSrc,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        value: this.state.newComment,\n        type: \"text\",\n        placeholder: \"Add a comment...\",\n        onChange: e => this.setState({\n          newComment: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    let modalData = null;\n\n    if (this.state.showModal) {\n      modalData = /*#__PURE__*/React.createElement(PeopleLiked, {\n        data: this.state.modalData,\n        hideModal: this.hideModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 9\n        }\n      });\n    }\n\n    let commentsData = null;\n\n    if (this.state.displayCommentSection) {\n      commentsData = this.state.comments.map(comment => {\n        let profID = localStorage.getItem(\"profileID\");\n        return /*#__PURE__*/React.createElement(Comment, {\n          viewerId: profID,\n          name: this.props.data.viewer_name,\n          tagline: this.props.data.viewer_tagline,\n          img: commentImgSrc,\n          comment: comment,\n          commentId: comment.comment.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 11\n          }\n        }); // let commentUserImgSrc = comment.comment.userImg;\n        // if (commentUserImgSrc === null) {\n        //   commentUserImgSrc = defaultPic;\n        // }\n        // let isCommentLiked = comment.comment.isLiked;\n        // let likeComment = () => {\n        //   isCommentLiked = true;\n        //   alert('Liked comment!')\n        // }\n        // let likeButton = (\n        //   <span\n        //     onClick={this.unlikeComment}\n        //     style={{\n        //       backgroundColor: \"#edf0f5\",\n        //       borderRadius: \"3px\",\n        //       color: \"#0a66c2\",\n        //     }}\n        //     className=\"like\"\n        //   >\n        //     Like\n        //   </span>\n        // );\n        // if (!isCommentLiked) {\n        //   likeButton = (\n        //   <span onClick={likeComment} className=\"like\">Like</span>\n        //   );\n        // }\n        // return (\n        //   <div className=\"comment\">\n        //     <img src={commentUserImgSrc} />\n        //     <div className=\"commentBlock\">\n        //       <div className=\"commentData\">\n        //         <NavLink to={`/user/${comment.comment.userId}`}>\n        //           <h6 className=\"name\">{comment.comment.name}</h6>\n        //           <h6 className=\"tag\">{comment.comment.tag}</h6>\n        //         </NavLink>\n        //         <h6 className=\"actualComment\">{comment.comment.comment}</h6>\n        //       </div>\n        //       <div>{likeButton}</div>\n        //     </div>\n        //   </div>\n        // );\n      });\n    }\n\n    let bookMarkIcon = /*#__PURE__*/React.createElement(\"i\", {\n      onClick: this.bookmark,\n      class: \"far fa-bookmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 24\n      }\n    });\n\n    if (this.state.isBookmarked) {\n      bookMarkIcon = /*#__PURE__*/React.createElement(\"i\", {\n        onClick: this.unBookmark,\n        class: \"fas fa-bookmark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 22\n        }\n      });\n    }\n\n    let topMessage =\n    /*#__PURE__*/\n    // <h6 className='message'>Utkarsh Patel liked this</h6>\n    React.createElement(\"h6\", {\n      className: \"message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 7\n      }\n    }, postData.message);\n\n    if (postData.message === null || postData.message === undefined) {\n      topMessage = null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 7\n      }\n    }, modalData, topMessage, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"postHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userDetails\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      to: `/user/${postData.author_id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"userPic\",\n      src: userPic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userAbout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }\n    }, postData.author_name), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }\n    }, postData.author_tagline), /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }\n    }, postData.posted_at, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        fontSize: '11.2px',\n        marginLeft: '3.5px',\n        transform: 'translateY(0.6px)',\n        color: 'grey'\n      },\n      class: \"fas fa-globe-americas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bookmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 13\n      }\n    }, bookMarkIcon)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"strike\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        whiteSpace: \"pre-wrap\"\n      },\n      className: \"postText\",\n      style: textHeight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 11\n      }\n    }, postTextData, /*#__PURE__*/React.createElement(\"h6\", {\n      style: seeMore,\n      onClick: this.showFullText,\n      className: \"readmore\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 13\n      }\n    }, \"...see more\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mediaDisplay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }\n    }, mediaData), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"numDisplay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      onClick: () => this.showPeopleList(this.state.likedByList),\n      className: \"likes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-thumbs-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 15\n      }\n    }), postData.likes_count), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        transform: \"translateY(-8px)\",\n        margin: \"0px 6px\",\n        fontWeight: \"500\",\n        color: \"rgb(112, 112, 112)\"\n      },\n      className: \"dot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 13\n      }\n    }, \",\"), /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.displayCommentSection,\n      className: \"comments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 13\n      }\n    }, postData.comment_count, \" Comments\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"strike\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }\n    }, iconData, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.displayCommentSection,\n      className: \"commentIcon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"far fa-comment-dots\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 13\n      }\n    }, \"Comment\"))), commentSection, commentsData);\n  }\n\n}\n\nexport default Post;","map":{"version":3,"sources":["/home/sergi/Documents/Repos/My_Repos/Cotiza-T_ISW/frontend/src/routes/SavedPosts/Post/Post.js"],"names":["React","Component","NavLink","defaultPic","mediaSrcI","mediaSrcV","Comment","PeopleLiked","axios","Post","state","post","props","data","comments","showFullText","isLiked","is_liked_by_user","displayCommentSection","newComment","showModal","modalData","likedByList","liked_by","isBookmarked","is_saved_by_user","showPeopleList","console","log","peopleList","profID","localStorage","getItem","newList","id","voter_avatar","viewer_avatar","voter_name","viewer_name","voter_tagline","viewer_tagline","index","push","setState","hideModal","like","token","config","headers","Authorization","likePost","vote","postId","then","res","catch","err","likes_count","unLike","bookmark","bookData","field","unBookmark","delete","addComment","e","preventDefault","text","commentData","commented_by","commentId","comment_count","newComments","comment","author_id","author_avatar","is_liked","posted_at","author_name","author_tagline","replies","setTimeout","render","postData","userPic","undefined","postTextData","textHeight","seeMore","display","height","overflowY","mediaData","media_type","media","iconData","color","commentImgSrc","commentSection","target","value","commentsData","map","bookMarkIcon","topMessage","message","fontSize","marginLeft","transform","whiteSpace","margin","fontWeight"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,OAAOC,UAAP,MAAuB,uCAAvB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,SAAP,MAAsB,iCAAtB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;;AAEA,MAAMC,IAAN,SAAmBR,SAAnB,CAA6B;AAAA;AAAA;AAAA,SAC3BS,KAD2B,GACnB;AACNC,MAAAA,IAAI,EAAE,KAAKC,KAAL,CAAWC,IADX;AAENC,MAAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWC,IAAX,CAAgBC,QAFpB;AAGNC,MAAAA,YAAY,EAAE,KAHR;AAINC,MAAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWC,IAAX,CAAgBI,gBAJnB;AAKNC,MAAAA,qBAAqB,EAAE,KALjB;AAMNC,MAAAA,UAAU,EAAE,EANN;AAONC,MAAAA,SAAS,EAAE,KAPL;AAQNC,MAAAA,SAAS,EAAE,IARL;AASNC,MAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWC,IAAX,CAAgBU,QATvB;AAUNC,MAAAA,YAAY,EAAE,KAAKZ,KAAL,CAAWC,IAAX,CAAgBY;AAVxB,KADmB;;AAAA,SAc3BC,cAd2B,GAcTb,IAAD,IAAU;AACzBc,MAAAA,OAAO,CAACC,GAAR,CAAYf,IAAZ;AACA,UAAIgB,UAAU,GAAGhB,IAAjB;AACA,UAAIiB,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAb;;AACA,UAAI,KAAKtB,KAAL,CAAWM,OAAf,EAAwB;AACtB,YAAIiB,OAAO,GAAG,CACZ;AACEC,UAAAA,EAAE,EAAEJ,MADN;AAEEK,UAAAA,YAAY,EAAE,KAAKvB,KAAL,CAAWC,IAAX,CAAgBuB,aAFhC;AAGEC,UAAAA,UAAU,EAAE,KAAKzB,KAAL,CAAWC,IAAX,CAAgByB,WAH9B;AAIEC,UAAAA,aAAa,EAAE,KAAK3B,KAAL,CAAWC,IAAX,CAAgB2B;AAJjC,SADY,CAAd;;AAQA,aAAK,IAAIC,KAAT,IAAkBZ,UAAlB,EAA8B;AAC5BI,UAAAA,OAAO,CAACS,IAAR,CAAab,UAAU,CAACY,KAAD,CAAvB;AACD;;AACDZ,QAAAA,UAAU,GAAGI,OAAb;AACD;;AACDN,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKlB,KAAL,CAAWM,OAAvB;AACAW,MAAAA,OAAO,CAACC,GAAR,CAAYC,UAAZ;AACA,WAAKc,QAAL,CAAc;AACZvB,QAAAA,SAAS,EAAE,IADC;AAEZC,QAAAA,SAAS,EAAEQ;AAFC,OAAd;AAID,KAtC0B;;AAAA,SAuC3Be,SAvC2B,GAuCf,MAAM;AAChB,WAAKD,QAAL,CAAc;AAAEvB,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,KAzC0B;;AAAA,SA2C3BL,YA3C2B,GA2CZ,MAAM;AACnB,WAAK4B,QAAL,CAAc;AAAE5B,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACD,KA7C0B;;AAAA,SA+C3B8B,IA/C2B,GA+CpB,MAAM;AACX,UAAIC,KAAK,GAAGf,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAZ;AACA,YAAMe,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAG,UAASH,KAAM;AAAjC;AADI,OAAf;AAGA,UAAII,QAAQ,GAAG;AACbC,QAAAA,IAAI,EAAE;AADO,OAAf;AAGA3C,MAAAA,KAAK,CACFG,IADH,CACS,mBAAkB,KAAKC,KAAL,CAAWwC,MAAO,QAD7C,EACsDF,QADtD,EACgEH,MADhE,EAEGM,IAFH,CAESC,GAAD,IAAS;AACb3B,QAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAZ;AACD,OAJH,EAKGC,KALH,CAKUC,GAAD,IAAS;AACd7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACD,OAPH;AASA,WAAKb,QAAL,CAAc;AAAE3B,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,WAAKN,KAAL,CAAWC,IAAX,CAAgB8C,WAAhB,GAA8B,KAAK/C,KAAL,CAAWC,IAAX,CAAgB8C,WAAhB,GAA8B,CAA5D;AACD,KAlE0B;;AAAA,SAoE3BC,MApE2B,GAoElB,MAAM;AACb,UAAIZ,KAAK,GAAGf,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAZ;AACA,YAAMe,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASH,KAAM,EADxB,CAEP;AACA;;AAHO;AADI,OAAf;AAOA,UAAII,QAAQ,GAAG;AACbC,QAAAA,IAAI,EAAE,CAAC;AADM,OAAf;AAGA3C,MAAAA,KAAK,CACFG,IADH,CACS,mBAAkB,KAAKC,KAAL,CAAWwC,MAAO,QAD7C,EACsDF,QADtD,EACgEH,MADhE,EAEGM,IAFH,CAESC,GAAD,IAAS;AACb3B,QAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAZ;AACD,OAJH,EAKGC,KALH,CAKUC,GAAD,IAAS;AACd7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACD,OAPH;AASA,WAAKb,QAAL,CAAc;AAAE3B,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,WAAKN,KAAL,CAAWC,IAAX,CAAgB8C,WAAhB,GAA8B,KAAK/C,KAAL,CAAWC,IAAX,CAAgB8C,WAAhB,GAA8B,CAA5D;AACD,KA3F0B;;AAAA,SA6F3BvC,qBA7F2B,GA6FH,MAAM;AAC5B,WAAKyB,QAAL,CAAc;AAAEzB,QAAAA,qBAAqB,EAAE;AAAzB,OAAd;AACD,KA/F0B;;AAAA,SAiG3ByC,QAjG2B,GAiGhB,MAAM;AACf,WAAKhB,QAAL,CAAc;AAAEnB,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACA,UAAIsB,KAAK,GAAGf,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAZ;AACA,YAAMe,MAAM,GAAG;AACb;AACAC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASH,KAAM,EADxB,CAEP;AACA;;AAHO;AAFI,OAAf;AAQA,YAAMc,QAAQ,GAAG;AACfC,QAAAA,KAAK,EAAE;AADQ,OAAjB;AAGArD,MAAAA,KAAK,CACFG,IADH,CACS,uBAAsB,KAAKC,KAAL,CAAWwC,MAAO,GADjD,EACqDQ,QADrD,EAC+Db,MAD/D,EAEGM,IAFH,CAESC,GAAD,IAAS;AACb3B,QAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAZ;AACD,OAJH,EAKGC,KALH,CAKUC,GAAD,IAAS;AACd7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACD,OAPH;AAQD,KAvH0B;;AAAA,SAwH3BM,UAxH2B,GAwHd,MAAM;AACjB,WAAKnB,QAAL,CAAc;AAAEnB,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACA,UAAIsB,KAAK,GAAGf,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAZ;AACA,YAAMe,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAG,UAASH,KAAM;AAAjC;AADI,OAAf;AAGA,YAAMc,QAAQ,GAAG;AACfC,QAAAA,KAAK,EAAE;AADQ,OAAjB;AAGArD,MAAAA,KAAK,CACFuD,MADH,CACW,uBAAsB,KAAKnD,KAAL,CAAWwC,MAAO,GADnD,EACuDQ,QADvD,EACiEb,MADjE,EAEGM,IAFH,CAESC,GAAD,IAAS;AACb3B,QAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAZ;AACD,OAJH,EAKGC,KALH,CAKUC,GAAD,IAAS;AACd7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACD,OAPH;AAQD,KAzI0B;;AAAA,SA2I3BQ,UA3I2B,GA2IbC,CAAD,IAAO;AAClBA,MAAAA,CAAC,CAACC,cAAF;AACA,UAAIpC,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAb;AAEA,UAAIoB,MAAM,GAAG,KAAKxC,KAAL,CAAWwC,MAAxB;AACA,UAAIe,IAAI,GAAG,KAAKzD,KAAL,CAAWS,UAAtB;AACA,UAAIiD,WAAW,GAAG;AAChBC,QAAAA,YAAY,EAAEvC,MADE;AAEhBnB,QAAAA,IAAI,EAAEyC,MAFU;AAGhBe,QAAAA,IAAI,EAAEA;AAHU,OAAlB;AAKA,UAAIrB,KAAK,GAAGf,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAZ;AACA,YAAMe,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAG,UAASH,KAAM;AAAjC;AADI,OAAf;AAGA,UAAIwB,SAAS,GAAG,IAAhB;AACA3C,MAAAA,OAAO,CAACC,GAAR,CAAYwC,WAAZ;AACA5D,MAAAA,KAAK,CACFG,IADH,CACS,4BADT,EACsCyD,WADtC,EACmDrB,MADnD,EAEGM,IAFH,CAESC,GAAD,IAAS;AACb3B,QAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAZ;AACAgB,QAAAA,SAAS,GAAGhB,GAAG,CAACzC,IAAJ,CAASqB,EAArB;AACD,OALH,EAMGqB,KANH,CAMUC,GAAD,IAAS;AACd7B,QAAAA,OAAO,CAACC,GAAR,CAAY4B,GAAZ;AACD,OARH;AAUA,WAAK9C,KAAL,CAAWC,IAAX,CAAgB4D,aAAhB,GAAgC,KAAK7D,KAAL,CAAWC,IAAX,CAAgB4D,aAAhB,GAAgC,CAAhE;AACA,UAAIC,WAAW,GAAG,CAChB;AACA;AACA;AACA;AACA;AACA;AACEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,SAAS,EAAE5C,MADJ;AAEP;AACA6C,UAAAA,aAAa,EAAE,KAAK/D,KAAL,CAAWC,IAAX,CAAgBuB,aAHxB;AAIPwC,UAAAA,QAAQ,EAAE,KAJH;AAKPnB,UAAAA,WAAW,EAAE,CALN;AAMPvB,UAAAA,EAAE,EAAEoC,SANG;AAOPO,UAAAA,SAAS,EAAE,UAPJ;AAQPN,UAAAA,aAAa,EAAE,CARR;AASPO,UAAAA,WAAW,EAAE,KAAKlE,KAAL,CAAWC,IAAX,CAAgByB,WATtB;AAUPyC,UAAAA,cAAc,EAAE,KAAKnE,KAAL,CAAWC,IAAX,CAAgB2B,cAVzB;AAWP2B,UAAAA,IAAI,EAAE,KAAKzD,KAAL,CAAWS;AAXV,SADX;AAcE6D,QAAAA,OAAO,EAAE;AAdX,OANgB,CAAlB;;AAwBA,WAAK,IAAIvC,KAAT,IAAkB,KAAK/B,KAAL,CAAWI,QAA7B,EAAuC;AACrC0D,QAAAA,WAAW,CAAC9B,IAAZ,CAAiB,KAAKhC,KAAL,CAAWI,QAAX,CAAoB2B,KAApB,CAAjB;AACD,OAtDiB,CAuDlB;;;AACA,WAAKE,QAAL,CAAc;AACZxB,QAAAA,UAAU,EAAE,EADA;AAEZL,QAAAA,QAAQ,EAAE0D;AAFE,OAAd;AAKA,WAAK7B,QAAL,CAAc;AACZxB,QAAAA,UAAU,EAAE,EADA;AAEZL,QAAAA,QAAQ,EAAE0D;AAFE,OAAd;AAIAS,MAAAA,UAAU,CAAC,MAAM;AACftD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKlB,KAAL,CAAWI,QAAvB;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KA/M0B;AAAA;;AAiN3BoE,EAAAA,MAAM,GAAG;AACP,QAAIC,QAAQ,GAAG,KAAKzE,KAAL,CAAWC,IAA1B,CADO,CAEP;;AACA,QAAIyE,OAAO,GAAGD,QAAQ,CAACR,aAAvB;;AACA,QAAIS,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAKC,SAApC,EAA+C;AAC7CD,MAAAA,OAAO,GAAGjF,UAAV;AACD,KANM,CAQP;;;AACA,QAAImF,YAAY,GAAGH,QAAQ,CAAChB,IAA5B;AAEA,QAAIoB,UAAU,GAAG,IAAjB;AACA,QAAIC,OAAO,GAAG;AACZC,MAAAA,OAAO,EAAE;AADG,KAAd;;AAGA,QAAI,CAAC,KAAK/E,KAAL,CAAWK,YAAhB,EAA8B;AAC5BwE,MAAAA,UAAU,GAAG;AACXG,QAAAA,MAAM,EAAE,MADG;AAEXC,QAAAA,SAAS,EAAE;AAFA,OAAb;AAIAH,MAAAA,OAAO,GAAG;AACRC,QAAAA,OAAO,EAAE;AADD,OAAV;AAGD;;AAED,QAAIG,SAAS,GAAG,IAAhB;;AACA,QAAIT,QAAQ,CAACU,UAAT,KAAwB,KAA5B,EAAmC;AACjCD,MAAAA,SAAS,gBACP;AAAK,QAAA,GAAG,EAAET,QAAQ,CAACW,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADO,CAEP;AAFF;AAID;;AACD,QAAIX,QAAQ,CAACU,UAAT,KAAwB,OAA5B,EAAqC;AACnCD,MAAAA,SAAS,gBACP;AAAO,QAAA,GAAG,EAAET,QAAQ,CAACW,KAArB;AAA4B,QAAA,QAAQ,MAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADO,CAEP;AAFF;AAID;;AAED,QAAIC,QAAQ,gBACV;AAAK,MAAA,OAAO,EAAE,KAAKrC,MAAnB;AAA2B,MAAA,SAAS,EAAC,UAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,KAAK,EAAE;AAAEsC,QAAAA,KAAK,EAAE;AAAT,OAAV;AAAgC,MAAA,KAAK,EAAC,kBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAI,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,CADF;;AAMA,QAAI,CAAC,KAAKtF,KAAL,CAAWM,OAAhB,EAAyB;AACvB+E,MAAAA,QAAQ,gBACN;AAAK,QAAA,OAAO,EAAE,KAAKlD,IAAnB;AAAyB,QAAA,SAAS,EAAC,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,KAAK,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CADF;AAMD;;AAED,QAAIoD,aAAa,GAAGd,QAAQ,CAAC/C,aAA7B;;AACA,QAAI6D,aAAa,KAAK,IAAtB,EAA4B;AAC1BA,MAAAA,aAAa,GAAG9F,UAAhB;AACD;;AAED,QAAI+F,cAAc,GAAG,IAArB;;AACA,QAAI,KAAKxF,KAAL,CAAWQ,qBAAf,EAAsC;AACpCgF,MAAAA,cAAc,gBACZ;AAAM,QAAA,QAAQ,EAAE,KAAKlC,UAArB;AAAiC,QAAA,SAAS,EAAC,iBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,GAAG,EAAEiC,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AACE,QAAA,KAAK,EAAE,KAAKvF,KAAL,CAAWS,UADpB;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,WAAW,EAAC,kBAHd;AAIE,QAAA,QAAQ,EAAG8C,CAAD,IAAO,KAAKtB,QAAL,CAAc;AAAExB,UAAAA,UAAU,EAAE8C,CAAC,CAACkC,MAAF,CAASC;AAAvB,SAAd,CAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF;AAWD;;AAED,QAAI/E,SAAS,GAAG,IAAhB;;AACA,QAAI,KAAKX,KAAL,CAAWU,SAAf,EAA0B;AACxBC,MAAAA,SAAS,gBACP,oBAAC,WAAD;AAAa,QAAA,IAAI,EAAE,KAAKX,KAAL,CAAWW,SAA9B;AAAyC,QAAA,SAAS,EAAE,KAAKuB,SAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAGD;;AAED,QAAIyD,YAAY,GAAG,IAAnB;;AACA,QAAI,KAAK3F,KAAL,CAAWQ,qBAAf,EAAsC;AACpCmF,MAAAA,YAAY,GAAG,KAAK3F,KAAL,CAAWI,QAAX,CAAoBwF,GAApB,CAAyB7B,OAAD,IAAa;AAClD,YAAI3C,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAb;AACA,4BACE,oBAAC,OAAD;AACE,UAAA,QAAQ,EAAEF,MADZ;AAEE,UAAA,IAAI,EAAE,KAAKlB,KAAL,CAAWC,IAAX,CAAgByB,WAFxB;AAGE,UAAA,OAAO,EAAE,KAAK1B,KAAL,CAAWC,IAAX,CAAgB2B,cAH3B;AAIE,UAAA,GAAG,EAAEyD,aAJP;AAKE,UAAA,OAAO,EAAExB,OALX;AAME,UAAA,SAAS,EAAEA,OAAO,CAACA,OAAR,CAAgBvC,EAN7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAFkD,CAalD;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACD,OA9Dc,CAAf;AA+DD;;AAED,QAAIqE,YAAY,gBAAG;AAAG,MAAA,OAAO,EAAE,KAAK5C,QAAjB;AAA2B,MAAA,KAAK,EAAC,iBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAnB;;AACA,QAAI,KAAKjD,KAAL,CAAWc,YAAf,EAA6B;AAC3B+E,MAAAA,YAAY,gBAAG;AAAG,QAAA,OAAO,EAAE,KAAKzC,UAAjB;AAA6B,QAAA,KAAK,EAAC,iBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAf;AACD;;AAED,QAAI0C,UAAU;AAAA;AACZ;AACA;AAAI,MAAA,SAAS,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBrB,QAAQ,CAACsB,OAAlC,CAFF;;AAIA,QAAItB,QAAQ,CAACsB,OAAT,KAAqB,IAArB,IAA6BtB,QAAQ,CAACsB,OAAT,KAAqBpB,SAAtD,EAAkE;AAChEmB,MAAAA,UAAU,GAAG,IAAb;AACD;;AAED,wBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnF,SADH,EAEGmF,UAFH,eAGE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,EAAE,EAAG,SAAQrB,QAAQ,CAACT,SAAU,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAyB,MAAA,GAAG,EAAEU,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsBD,QAAQ,CAACL,WAA/B,CADF,eAEE;AAAI,MAAA,SAAS,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqBK,QAAQ,CAACJ,cAA9B,CAFF,eAIE;AAAI,MAAA,SAAS,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGI,QAAQ,CAACN,SADZ,eAEE;AAAG,MAAA,KAAK,EAAE;AAAC6B,QAAAA,QAAQ,EAAC,QAAV;AAAmBC,QAAAA,UAAU,EAAC,OAA9B;AAAsCC,QAAAA,SAAS,EAAC,mBAAhD;AAAoEZ,QAAAA,KAAK,EAAC;AAA1E,OAAV;AAA6F,MAAA,KAAK,EAAC,uBAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAJF,CAFF,CADF,eAcE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2BO,YAA3B,CAdF,CADF,eAkBE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlBF,eAoBE;AACE,MAAA,KAAK,EAAE;AAAEM,QAAAA,UAAU,EAAE;AAAd,OADT;AAEE,MAAA,SAAS,EAAC,UAFZ;AAGE,MAAA,KAAK,EAAEtB,UAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGD,YALH,eAME;AACE,MAAA,KAAK,EAAEE,OADT;AAEE,MAAA,OAAO,EAAE,KAAKzE,YAFhB;AAGE,MAAA,SAAS,EAAC,UAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANF,CApBF,CAHF,eAuCE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+B6E,SAA/B,CAvCF,eAyCE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,OAAO,EAAE,MAAM,KAAKlE,cAAL,CAAoB,KAAKhB,KAAL,CAAWY,WAA/B,CADjB;AAEE,MAAA,SAAS,EAAC,OAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAG,MAAA,KAAK,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAKG6D,QAAQ,CAAC1B,WALZ,CADF,eAQE;AACE,MAAA,KAAK,EAAE;AACLmD,QAAAA,SAAS,EAAE,kBADN;AAELE,QAAAA,MAAM,EAAE,SAFH;AAGLC,QAAAA,UAAU,EAAE,KAHP;AAILf,QAAAA,KAAK,EAAE;AAJF,OADT;AAOE,MAAA,SAAS,EAAC,KAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WARF,eAmBE;AAAM,MAAA,OAAO,EAAE,KAAK9E,qBAApB;AAA2C,MAAA,SAAS,EAAC,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGiE,QAAQ,CAACZ,aADZ,cAnBF,CADF,CAzCF,eAmEE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAnEF,eAqEE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGwB,QADH,eAGE;AAAK,MAAA,OAAO,EAAE,KAAK7E,qBAAnB;AAA0C,MAAA,SAAS,EAAC,aAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,KAAK,EAAC,qBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,CAHF,CArEF,EA8EGgF,cA9EH,EA+EGG,YA/EH,CADF;AAmFD;;AArc0B;;AAwc7B,eAAe5F,IAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport defaultPic from \"../../../assets/defaultProfilePic.png\";\r\nimport mediaSrcI from \"../../../assets/4.png\";\r\nimport mediaSrcV from \"../../../assets/sampleVideo.mp4\";\r\nimport Comment from \"./Comment\";\r\nimport PeopleLiked from \"./PeopleLiked\";\r\nimport axios from \"../../../API/baseURL/baseURL\";\r\n\r\nclass Post extends Component {\r\n  state = {\r\n    post: this.props.data,\r\n    comments: this.props.data.comments,\r\n    showFullText: false,\r\n    isLiked: this.props.data.is_liked_by_user,\r\n    displayCommentSection: false,\r\n    newComment: \"\",\r\n    showModal: false,\r\n    modalData: null,\r\n    likedByList: this.props.data.liked_by,\r\n    isBookmarked: this.props.data.is_saved_by_user,\r\n  };\r\n\r\n  showPeopleList = (data) => {\r\n    console.log(data);\r\n    let peopleList = data;\r\n    let profID = localStorage.getItem(\"profileID\");\r\n    if (this.state.isLiked) {\r\n      let newList = [\r\n        {\r\n          id: profID,\r\n          voter_avatar: this.props.data.viewer_avatar,\r\n          voter_name: this.props.data.viewer_name,\r\n          voter_tagline: this.props.data.viewer_tagline,\r\n        },\r\n      ];\r\n      for (let index in peopleList) {\r\n        newList.push(peopleList[index]);\r\n      }\r\n      peopleList = newList;\r\n    }\r\n    console.log(this.state.isLiked);\r\n    console.log(peopleList);\r\n    this.setState({\r\n      showModal: true,\r\n      modalData: peopleList,\r\n    });\r\n  };\r\n  hideModal = () => {\r\n    this.setState({ showModal: false });\r\n  };\r\n\r\n  showFullText = () => {\r\n    this.setState({ showFullText: true });\r\n  };\r\n\r\n  like = () => {\r\n    let token = localStorage.getItem(\"accessToken\");\r\n    const config = {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    };\r\n    let likePost = {\r\n      vote: 1,\r\n    };\r\n    axios\r\n      .post(`/user/post/vote/${this.props.postId}/like/`, likePost, config)\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    this.setState({ isLiked: true });\r\n    this.state.post.likes_count = this.state.post.likes_count + 1;\r\n  };\r\n\r\n  unLike = () => {\r\n    let token = localStorage.getItem(\"accessToken\");\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        // \"Content-Type\": \"application/json\",\r\n        // \"Accept\": \"application/json\",\r\n      },\r\n    };\r\n    let likePost = {\r\n      vote: -1,\r\n    };\r\n    axios\r\n      .post(`/user/post/vote/${this.props.postId}/like/`, likePost, config)\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    this.setState({ isLiked: false });\r\n    this.state.post.likes_count = this.state.post.likes_count - 1;\r\n  };\r\n\r\n  displayCommentSection = () => {\r\n    this.setState({ displayCommentSection: true });\r\n  };\r\n\r\n  bookmark = () => {\r\n    this.setState({ isBookmarked: true });\r\n    let token = localStorage.getItem(\"accessToken\");\r\n    const config = {\r\n      // withCredentials: true,\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        // \"Content-Type\": \"application/json\",\r\n        // \"Accept\": \"application/json\",\r\n      },\r\n    };\r\n    const bookData = {\r\n      field: \"data\",\r\n    };\r\n    axios\r\n      .post(`/user/post/bookmark/${this.props.postId}/`, bookData, config)\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  unBookmark = () => {\r\n    this.setState({ isBookmarked: false });\r\n    let token = localStorage.getItem(\"accessToken\");\r\n    const config = {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    };\r\n    const bookData = {\r\n      field: \"data\",\r\n    };\r\n    axios\r\n      .delete(`/user/post/bookmark/${this.props.postId}/`, bookData, config)\r\n      .then((res) => {\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  addComment = (e) => {\r\n    e.preventDefault();\r\n    let profID = localStorage.getItem(\"profileID\");\r\n\r\n    let postId = this.props.postId;\r\n    let text = this.state.newComment;\r\n    let commentData = {\r\n      commented_by: profID,\r\n      post: postId,\r\n      text: text,\r\n    };\r\n    let token = localStorage.getItem(\"accessToken\");\r\n    const config = {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    };\r\n    let commentId = null;\r\n    console.log(commentData);\r\n    axios\r\n      .post(`/user/post/comment/create/`, commentData, config)\r\n      .then((res) => {\r\n        console.log(res);\r\n        commentId = res.data.id;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    this.state.post.comment_count = this.state.post.comment_count + 1;\r\n    let newComments = [\r\n      // {\r\n      //   userPic : this.props.data.selfUserPic,\r\n      //   userName : this.props.data.selfName,\r\n      //   tagline : this.props.data.tagLine,\r\n      // }\r\n      {\r\n        comment: {\r\n          author_id: profID,\r\n          // commentId: null,\r\n          author_avatar: this.props.data.viewer_avatar,\r\n          is_liked: false,\r\n          likes_count: 0,\r\n          id: commentId,\r\n          posted_at: 'just now',\r\n          comment_count: 0,\r\n          author_name: this.props.data.viewer_name,\r\n          author_tagline: this.props.data.viewer_tagline,\r\n          text: this.state.newComment,\r\n        },\r\n        replies: [],\r\n      },\r\n    ];\r\n\r\n    for (let index in this.state.comments) {\r\n      newComments.push(this.state.comments[index]);\r\n    }\r\n    // alert(this.state.newComment);\r\n    this.setState({\r\n      newComment: \"\",\r\n      comments: newComments,\r\n    });\r\n\r\n    this.setState({\r\n      newComment: \"\",\r\n      comments: newComments,\r\n    });\r\n    setTimeout(() => {\r\n      console.log(this.state.comments);\r\n    }, 1000);\r\n  };\r\n\r\n  render() {\r\n    let postData = this.state.post;\r\n    // let userPic = postData.userPic;\r\n    let userPic = postData.author_avatar;\r\n    if (userPic === null || userPic === undefined) {\r\n      userPic = defaultPic;\r\n    }\r\n\r\n    // let postTextData = postData.postText;\r\n    let postTextData = postData.text;\r\n\r\n    let textHeight = null;\r\n    let seeMore = {\r\n      display: \"none\",\r\n    };\r\n    if (!this.state.showFullText) {\r\n      textHeight = {\r\n        height: \"65px\",\r\n        overflowY: \"hidden\",\r\n      };\r\n      seeMore = {\r\n        display: \"block\",\r\n      };\r\n    }\r\n\r\n    let mediaData = null;\r\n    if (postData.media_type === \"img\") {\r\n      mediaData = (\r\n        <img src={postData.media} />\r\n        // <img src={mediaSrcI} />\r\n      );\r\n    }\r\n    if (postData.media_type === \"video\") {\r\n      mediaData = (\r\n        <video src={postData.media} controls />\r\n        // <video src={mediaSrcV} controls />\r\n      );\r\n    }\r\n\r\n    let iconData = (\r\n      <div onClick={this.unLike} className=\"likeIcon\">\r\n        <i style={{ color: \"#0a66c2\" }} class=\"fas fa-thumbs-up\"></i>\r\n        <h6 style={{ color: \"#0a66c2\" }}>Like</h6>\r\n      </div>\r\n    );\r\n    if (!this.state.isLiked) {\r\n      iconData = (\r\n        <div onClick={this.like} className=\"likeIcon\">\r\n          <i class=\"far fa-thumbs-up\"></i>\r\n          <h6>Like</h6>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    let commentImgSrc = postData.viewer_avatar;\r\n    if (commentImgSrc === null) {\r\n      commentImgSrc = defaultPic;\r\n    }\r\n\r\n    let commentSection = null;\r\n    if (this.state.displayCommentSection) {\r\n      commentSection = (\r\n        <form onSubmit={this.addComment} className=\"commentInputBar\">\r\n          <img src={commentImgSrc} />\r\n          <input\r\n            value={this.state.newComment}\r\n            type=\"text\"\r\n            placeholder=\"Add a comment...\"\r\n            onChange={(e) => this.setState({ newComment: e.target.value })}\r\n          />\r\n        </form>\r\n      );\r\n    }\r\n\r\n    let modalData = null;\r\n    if (this.state.showModal) {\r\n      modalData = (\r\n        <PeopleLiked data={this.state.modalData} hideModal={this.hideModal} />\r\n      );\r\n    }\r\n\r\n    let commentsData = null;\r\n    if (this.state.displayCommentSection) {\r\n      commentsData = this.state.comments.map((comment) => {\r\n        let profID = localStorage.getItem(\"profileID\");\r\n        return (\r\n          <Comment\r\n            viewerId={profID}\r\n            name={this.props.data.viewer_name}\r\n            tagline={this.props.data.viewer_tagline}\r\n            img={commentImgSrc}\r\n            comment={comment}\r\n            commentId={comment.comment.id}\r\n          />\r\n        );\r\n\r\n        // let commentUserImgSrc = comment.comment.userImg;\r\n        // if (commentUserImgSrc === null) {\r\n        //   commentUserImgSrc = defaultPic;\r\n        // }\r\n\r\n        // let isCommentLiked = comment.comment.isLiked;\r\n\r\n        // let likeComment = () => {\r\n        //   isCommentLiked = true;\r\n        //   alert('Liked comment!')\r\n        // }\r\n\r\n        // let likeButton = (\r\n        //   <span\r\n        //     onClick={this.unlikeComment}\r\n        //     style={{\r\n        //       backgroundColor: \"#edf0f5\",\r\n        //       borderRadius: \"3px\",\r\n        //       color: \"#0a66c2\",\r\n        //     }}\r\n        //     className=\"like\"\r\n        //   >\r\n        //     Like\r\n        //   </span>\r\n        // );\r\n        // if (!isCommentLiked) {\r\n        //   likeButton = (\r\n        //   <span onClick={likeComment} className=\"like\">Like</span>\r\n        //   );\r\n        // }\r\n\r\n        // return (\r\n        //   <div className=\"comment\">\r\n        //     <img src={commentUserImgSrc} />\r\n\r\n        //     <div className=\"commentBlock\">\r\n        //       <div className=\"commentData\">\r\n        //         <NavLink to={`/user/${comment.comment.userId}`}>\r\n        //           <h6 className=\"name\">{comment.comment.name}</h6>\r\n        //           <h6 className=\"tag\">{comment.comment.tag}</h6>\r\n        //         </NavLink>\r\n\r\n        //         <h6 className=\"actualComment\">{comment.comment.comment}</h6>\r\n        //       </div>\r\n\r\n        //       <div>{likeButton}</div>\r\n        //     </div>\r\n        //   </div>\r\n        // );\r\n      });\r\n    }\r\n\r\n    let bookMarkIcon = <i onClick={this.bookmark} class=\"far fa-bookmark\" />;\r\n    if (this.state.isBookmarked) {\r\n      bookMarkIcon = <i onClick={this.unBookmark} class=\"fas fa-bookmark\" />;\r\n    }\r\n\r\n    let topMessage = (\r\n      // <h6 className='message'>Utkarsh Patel liked this</h6>\r\n      <h6 className=\"message\">{postData.message}</h6>\r\n    );\r\n    if (postData.message === null || postData.message === undefined ) {\r\n      topMessage = null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"post\">\r\n        {modalData}\r\n        {topMessage}\r\n        <div className=\"postHeader\">\r\n          <div className=\"userDetails\">\r\n            <NavLink to={`/user/${postData.author_id}`}>\r\n              <img className=\"userPic\" src={userPic} />\r\n              <div className=\"userAbout\">\r\n                <h6 className=\"name\">{postData.author_name}</h6>\r\n                <h6 className=\"tag\">{postData.author_tagline}</h6>\r\n                {/* <h6 className=\"tag\">{postData.location}</h6> */}\r\n                <h6 className=\"tag\">\r\n                  {postData.posted_at}\r\n                  <i style={{fontSize:'11.2px',marginLeft:'3.5px',transform:'translateY(0.6px)',color:'grey'}} class=\"fas fa-globe-americas\"></i>\r\n                </h6>\r\n              </div>\r\n            </NavLink>\r\n\r\n            <div className=\"bookmark\">{bookMarkIcon}</div>\r\n          </div>\r\n\r\n          <div className=\"strike\"></div>\r\n\r\n          <div\r\n            style={{ whiteSpace: \"pre-wrap\" }}\r\n            className=\"postText\"\r\n            style={textHeight}\r\n          >\r\n            {postTextData}\r\n            <h6\r\n              style={seeMore}\r\n              onClick={this.showFullText}\r\n              className=\"readmore\"\r\n            >\r\n              ...see more\r\n            </h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mediaDisplay\">{mediaData}</div>\r\n\r\n        <div className=\"numDisplay\">\r\n          <h6>\r\n            <span\r\n              onClick={() => this.showPeopleList(this.state.likedByList)}\r\n              className=\"likes\"\r\n            >\r\n              <i class=\"fas fa-thumbs-up\"></i>\r\n              {postData.likes_count}\r\n            </span>\r\n            <span\r\n              style={{\r\n                transform: \"translateY(-8px)\",\r\n                margin: \"0px 6px\",\r\n                fontWeight: \"500\",\r\n                color: \"rgb(112, 112, 112)\",\r\n              }}\r\n              className=\"dot\"\r\n            >\r\n              ,\r\n            </span>\r\n            <span onClick={this.displayCommentSection} className=\"comments\">\r\n              {postData.comment_count} Comments\r\n            </span>\r\n          </h6>\r\n        </div>\r\n\r\n        <div className=\"strike\"></div>\r\n\r\n        <div className=\"bar\">\r\n          {iconData}\r\n\r\n          <div onClick={this.displayCommentSection} className=\"commentIcon\">\r\n            <i class=\"far fa-comment-dots\"></i>\r\n            <h6>Comment</h6>\r\n          </div>\r\n        </div>\r\n\r\n        {commentSection}\r\n        {commentsData}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Post;\r\n"]},"metadata":{},"sourceType":"module"}